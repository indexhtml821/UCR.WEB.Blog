@model UCR.WEB.Blog.Models.PostUserModel

<div class="container mt-5">
    <h2>Posts de @Model.Users.FirstOrDefault()?.Name</h2> <!-- Muestra el nombre del usuario -->

    <div class="row">
        <div class="col-md-8">
            @if (Model.Posts.Any())
            {
                @foreach (var post in Model.Posts)
                {
                    <div class="card mb-4 shadow-sm">
                        <div class="card-body">
                            <h3 class="card-title">@post.Title</h3>
                            <p class="card-text">@post.Body</p>

                            <!-- Mostrar la imagen si está disponible -->
                            @if (post.ImageData != null)
                            {
                                <img src="data:image;base64,@Convert.ToBase64String(post.ImageData)" class="img-fluid mt-3" alt="Imagen del post" style="width: 100%; max-height: 300px; object-fit: cover;" />
                            }

                            <!-- Sección de comentarios -->
                            <div class="mt-4">
                                <h5>Comentarios</h5>
                                @if (post.Comments.Any())
                                {
                                    @foreach (var comment in post.Comments)
                                    {
                                        <div class="border p-3 mb-2">
                                            <strong>@comment.UserName</strong>
                                            <p class="mb-0">@comment.Text</p>
                                            <small class="text-muted">@comment.CreationDateTime</small>
                                        </div>
                                    }
                                }
                                else
                                {
                                    <p class="text-muted">Aún no hay comentarios. ¡Sé el primero en comentar!</p>
                                }
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <p>No hay posts para mostrar de este usuario.</p>
            }
        </div>
    </div>
</div>
